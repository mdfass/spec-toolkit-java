<?xml version="1.0" encoding="UTF-8"?>
<specification xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns="https://magento.com/open-specification"
               xsi:schemaLocation="https://magento.com/open-specification ../specification.xsd">

    <module name="magento.logistics">
        <service name="sla_management">
            <summary>SLA Management</summary>

            <event name="calculated">
                <summary>Notification about a calculation of Service Level Agreement</summary>
                <extensible>true</extensible>
                <status>draft</status>
                <arguments>
                    <argument name="order_id">
                        <summary>Order Id</summary>
                        <type>string</type>
                        <required>true</required>
                    </argument>
                    <argument name="line_number">
                        <summary>Order line number</summary>
                        <type>integer</type>
                        <required>true</required>
                    </argument>
                    <argument name="latest_pick_time">
                        <summary>Last pick time</summary>
                        <type>datetime</type>
                        <required>true</required>
                    </argument>
                    <argument name="latest_pack_time">
                        <summary>Last pack time</summary>
                        <type>datetime</type>
                        <required>true</required>
                    </argument>
                    <argument name="latest_shipping_time">
                        <summary>Last shipping time</summary>
                        <type>datetime</type>
                        <required>true</required>
                    </argument>
                    <argument name="earliest_pick_time">
                        <summary>Earliest pick time</summary>
                        <type>datetime</type>
                        <required>false</required>
                    </argument>
                </arguments>
            </event>

            <event name="expired">
                <summary>This message is triggered when a calculated SLA expires</summary>
                <extensible>true</extensible>
                <status>draft</status>
                <arguments>
                    <argument name="order_id">
                        <summary>Order Id</summary>
                        <type>string</type>
                        <required>true</required>
                    </argument>
                    <argument name="line_number">
                        <summary>Order line number</summary>
                        <type>integer</type>
                        <required>true</required>
                    </argument>
                    <argument name="expired_sla">
                        <summary>Expired SLA type</summary>
                        <type>magento.logistics.sla_type</type>
                        <required>true</required>
                    </argument>
                    <argument name="sla_value">
                        <summary>Time of the expired SLA</summary>
                        <type>datetime</type>
                        <required>false</required>
                    </argument>
                </arguments>
            </event>
        </service>

        <enum name="sla_type">
            <value>latest_pick_time</value>
            <value>latest_pack_time</value>
            <value>latest_shipping_time</value>
            <value>earliest_pick_time</value>
        </enum>
    </module>
</specification>
