<?xml version="1.0" encoding="UTF-8"?>
<specification xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns="https://magento.com/open-specification"
               xsi:schemaLocation="https://magento.com/open-specification ../specification.xsd">

    <module name="magento.source_engine">
        <service name="sourcing_response_management">
            <summary>Sourcing Response Management</summary>

            <event name="created">
                <summary>New Sourcing Response created event</summary>
                <extensible>false</extensible>
                <status>public</status>
                <arguments>
                    <argument name="sourcing_response">
                        <summary>Sourcing Response</summary>
                        <type>magento.source_engine.sourcing_response</type>
                        <required>true</required>
                    </argument>
                </arguments>
            </event>

            <command name="force_sourcing">
                <summary>Force Sourcing of an Order</summary>
                <extensible>false</extensible>
                <status>public</status>
                <arguments>
                    <argument name="force_sourcing">
                        <summary>Force Sourcing</summary>
                        <type>magento.source_engine.force_sourcing</type>
                        <required>true</required>
                    </argument>
                </arguments>
            </command>

        </service>

        <struct name="force_sourcing">
            <summary>Entity representing multiple lines forced to be sourced</summary>
            <extensible>true</extensible>
            <properties>
                <property name="order_id">
                    <summary>external order id</summary>
                    <type>string</type>
                    <required>false</required>
                </property>
                <property name="sales_channel_id">
                    <summary>Sales Channel ID</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="sourced_on">
                    <summary>When the sourcing happened</summary>
                    <type>datetime</type>
                    <required>true</required>
                </property>
                <property name="user">
                    <summary>User who triggered the force action</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="lines">
                    <summary>Order Lines that have been sourced by force</summary>
                    <type>array[magento.source_engine.force_sourcing_line]</type>
                    <required>true</required>
                </property>
            </properties>
        </struct>

        <struct name="force_sourcing_line">
            <summary>Force Sourcing Line</summary>
            <extensible>true</extensible>
            <properties>
                <property name="id">
                    <summary>Order Line ID</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="line_number">
                    <summary>Order Line Number</summary>
                    <type>integer</type>
                    <required>true</required>
                </property>
                <property name="sku">
                    <summary>SKU of the Item</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="source_id">
                    <summary>Source ID assigned to the forced Sourcing Line</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="allocation_attempts">
                    <summary>Number of allocation attempts of this Line</summary>
                    <type>integer</type>
                    <required>false</required>
                </property>
                <property name="reason">
                    <summary>Reason for the force sourcing</summary>
                    <type>string</type>
                    <required>false</required>
                </property>
                <property name="quantity">
                    <summary>The quantity of the force sourcing</summary>
                    <type>integer</type>
                    <required>true</required>
                </property>
            </properties>
        </struct>

        <struct name="sourcing_response">
            <summary>Entity representing multiple lines after sourcing them</summary>
            <extensible>true</extensible>
            <properties>
                <property name="sourcing_request_uuid">
                    <summary>UUID of the Sourcing Request</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="order_uuid">
                    <summary>UUID of the Order</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="order_id">
                    <summary>external order id</summary>
                    <type>string</type>
                    <required>false</required>
                </property>
                <property name="aggregate_id">
                    <summary>Aggregate ID</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="wave_id">
                    <summary>wave id this sourcing response was processed in</summary>
                    <type>string</type>
                    <required>false</required>
                </property>
                <property name="sourced_on">
                    <summary>When the sourcing happened</summary>
                    <type>datetime</type>
                    <required>true</required>
                </property>
                <property name="order_creation_date">
                    <summary>Creation Date of the Order</summary>
                    <type>datetime</type>
                    <required>true</required>
                </property>
                <property name="store_id">
                    <summary>Store ID</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="shipping_method">
                    <summary>Shipping Method</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="shipping_address">
                    <summary>Address of the Order</summary>
                    <type>magento.common.address</type>
                    <required>true</required>
                </property>
                <property name="lines">
                    <summary>Order Lines that have been sourced</summary>
                    <type>array[magento.source_engine.sourcing_response_line]</type>
                    <required>true</required>
                </property>
                <property name="custom_attributes">
                    <summary>Custom Attributes</summary>
                    <type>array[magento.common.custom_attribute]</type>
                    <required>false</required>
                </property>
            </properties>
        </struct>

        <struct name="sourcing_response_line">
            <summary>Sourcing Response Line</summary>
            <extensible>true</extensible>
            <properties>
                <property name="id">
                    <summary>Order Line ID</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="line_number">
                    <summary>Order Line Number</summary>
                    <type>integer</type>
                    <required>true</required>
                </property>
                <property name="sku">
                    <summary>SKU of the Item</summary>
                    <type>string</type>
                    <required>true</required>
                </property>
                <property name="source_id">
                    <summary>Source ID assigned to the Sourcing Line</summary>
                    <type>string</type>
                    <required>false</required>
                </property>
                <property name="allocation_attempts">
                    <summary>Number of allocation attempts of this Line</summary>
                    <type>integer</type>
                    <required>false</required>
                </property>
                <property name="reason">
                    <summary>Reason for the sourcing result</summary>
                    <type>string</type>
                    <required>false</required>
                </property>
                <property name="status">
                    <summary>Status of the sourcing result</summary>
                    <type>string</type>
                    <required>false</required>
                </property>
                <property name="custom_attributes">
                    <summary>Custom Attributes</summary>
                    <type>array[magento.common.custom_attribute]</type>
                    <required>false</required>
                </property>
                <property name="quantity">
                    <summary>Quantity sourcing</summary>
                    <type>integer</type>
                    <required>true</required>
                </property>
            </properties>
        </struct>
    </module>
</specification>
